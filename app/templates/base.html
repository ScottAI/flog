{% extends "bootstrap/base.html" %}
{% block title %}{{ g.blog_config.window_title }}{% endblock %}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> 
  {% assets "style_css" %}
      <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}"></link>
  {% endassets %}
{% endblock %}

{% block navbar %}
<div class="blog-masthead">
  <div class="container">
    <nav class="blog-nav">
        
        {% for category in cls.categories() %}
          <a class="blog-nav-item {% if active_category == category.slug %}active{% endif %}"
             href="{{ cls.url_for('category', catslug=category.slug) }}">{{ category.name }}</a>
        {% endfor %}
        <a class="blog-nav-item {% if is_all %}active{% endif %}"
           href="{{ cls.url_for('all_entries') }}">All</a>
        <a class="blog-nav-item {% if is_archives %}active{% endif %}"
           href="{{ cls.url_for('archives') }}">Archives</a>
       
       {# Atom Feeds #}
        <div class="btn-group" role="group">
          <button type="button"
                  style="border-style: none"
                  class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            <i class="fa fa-rss"></i> Feeds
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li>
                <a href="{{ url_for('atom_feed_entries') }}"><i class="fa fa-file-text-o"></i> Entries</a>
            </li>
            <li>
                <a href="{{ url_for('atom_feed_comments') }}"><i class="fa fa-comments"></i> Comments</a>
            </li>
          </ul>
        </div>
       
       <form style="display: inline"
               action="{{ cls.url_for('search') }}"
               method="post"
               name="search">
           {{ g.search_form.hidden_tag() }}
           {{ g.search_form.search(size=15, placeholder="Search") }}
       </form>

    </nav>
  </div>
</div>
{% endblock %}

{% block content %}
<style>
.pos-fixed-top-right {
    position: fixed;
    top: 55px;
    right: 15px;
    z-index: 999;
}

.preview-box {
    background: rgba(255,255,255, 0.7);
    padding: 5px;
    border-radius: 4px;
    border-style: none;
}

</style>

{% if cls.is_preview %}
  <div class="pos-fixed-top-right">
    <p class="preview-box">
      <span>Preview Version</span> | 
      <a href="/">Admin</a> |
      <a href="{{ url_for('PublicView.home') }}">Public</a>
    </p>
  </div>
{% endif %}

<div class="container">
  <div class="blog-header">
    <h1 class="blog-title">
        {{ g.blog_config.blog_title }}
    </h1>
    <p></p>
    <p style="padding-left: 20px" class="lead blog-description">
      {% autoescape off %}
        {{ g.blog_config.blog_subtitle }}
      {% endautoescape %}
    </p>
  </div>
  
  <div class="row">
    <div class="col-sm-9 col-md-8 blog-main"
         style="max-width: 560px !important"
         id="main">
      {% block main %}
      {% endblock %}
    </div>
    
    <div class="blog-sidebar col-sm-3 col-md-3
                col-md-offset-1
                col-sm-offset-0"
         role="navigation">
        
      <!--
         Because [docker.js](http://jbt.github.io/docker/README.md.html)
         does not support [Jinja](http://jinja.pocoo.org/), we have to use
         HTML comments in the templates (ugly!)
         
         Someone has to add some king of **Jinja** support to **docker.js**,
         because **docker.js** is f*** ing awesome.
      -->
      {% block sidebar %}
        {% include "sidebar-modules.html" %}
      {% endblock %}
    </div>
  </div>
</div>    

{% endblock %}

{% block scripts %}
  {{ super() }}
  {{ moment.include_jquery() }}
  {{ moment.include_moment() }}
  {% include "highlightjs-script.html" %}
  {% include "mathjax-script.html" %}
{% endblock %}

